<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'">
  <title>ADB Proxy Browser</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app-container">
    <!-- Header / Toolbar -->
    <header class="toolbar">
      <div class="toolbar-left">
        <button id="btn-back" class="nav-btn" title="Back">
          <svg viewBox="0 0 24 24" width="18" height="18">
            <path fill="currentColor" d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
          </svg>
        </button>
        <button id="btn-forward" class="nav-btn" title="Forward">
          <svg viewBox="0 0 24 24" width="18" height="18">
            <path fill="currentColor" d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/>
          </svg>
        </button>
        <button id="btn-refresh" class="nav-btn" title="Refresh">
          <svg viewBox="0 0 24 24" width="18" height="18">
            <path fill="currentColor" d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
          </svg>
        </button>
        <div class="url-bar">
          <input type="text" id="url-input" placeholder="Enter URL or search...">
        </div>
        <button id="btn-go" class="nav-btn">Go</button>
      </div>
      <div class="toolbar-right">
        <div class="connection-status" id="connection-status">
          <span class="status-indicator disconnected"></span>
          <span class="status-text">Disconnected</span>
        </div>
        <button id="btn-settings" class="nav-btn" title="Settings">
          <svg viewBox="0 0 24 24" width="18" height="18">
            <path fill="currentColor" d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
          </svg>
        </button>
      </div>
    </header>

    <!-- Main Content Area -->
    <main class="main-content">
      <!-- Welcome Screen / Control Panel -->
      <div id="welcome-screen" class="welcome-screen">
        <div class="welcome-container">
          <h1>ADB Proxy Browser</h1>
          <p class="subtitle">Browse the internet through your phone's proxy</p>

          <!-- Device Status -->
          <div class="device-panel">
            <h3>Device Status</h3>
            <div id="device-info" class="device-info">
              <span class="device-status">No device detected</span>
            </div>
          </div>

          <!-- Connection Controls -->
          <div class="control-panel">
            <button id="btn-connect" class="btn-connect">
              <svg viewBox="0 0 24 24" width="24" height="24">
                <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
              </svg>
              <span>Connect Phone</span>
            </button>
          </div>

          <!-- Quick Settings -->
          <div class="quick-settings">
            <div class="setting-row">
              <label>Proxy Port (Browser):</label>
              <input type="number" id="proxy-port" value="7890" min="1" max="65535">
            </div>
            <div class="setting-row">
              <label>Phone Proxy Port:</label>
              <input type="number" id="remote-port" value="7890" min="1" max="65535">
            </div>
            <div class="setting-row">
              <label>Proxy Type:</label>
              <select id="proxy-type">
                <option value="http" selected>HTTP</option>
                <option value="socks5">SOCKS5</option>
              </select>
            </div>
          </div>

          <!-- Instructions -->
          <div class="instructions">
            <h4>How to use:</h4>
            <ol>
              <li>Connect your Android phone via USB</li>
              <li>Enable USB debugging on your phone</li>
              <li>Make sure Clash (or other proxy) is running on your phone</li>
              <li>Enable "Allow LAN connections" in your proxy app</li>
              <li>Click "Connect Phone" button</li>
              <li>Start browsing!</li>
            </ol>
          </div>
        </div>
      </div>

      <!-- Browser View (hidden initially) -->
      <webview id="browser-view" class="browser-view" style="display: none;"></webview>
    </main>
  </div>

  <!-- Settings Modal -->
  <div id="settings-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Settings</h2>
        <button id="btn-close-settings" class="close-btn">&times;</button>
      </div>
      <div class="modal-body">
        <div class="setting-group">
          <h4>Proxy Settings</h4>
          <div class="setting-row">
            <label>Proxy Port (Browser):</label>
            <input type="number" id="settings-proxy-port" value="7890" min="1" max="65535">
          </div>
          <div class="setting-row">
            <label>Phone Proxy Port:</label>
            <input type="number" id="settings-remote-port" value="7890" min="1" max="65535">
          </div>
          <div class="setting-row">
            <label>Proxy Type:</label>
            <select id="settings-proxy-type">
              <option value="http" selected>HTTP</option>
              <option value="socks5">SOCKS5</option>
            </select>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="btn-save-settings" class="btn-primary">Save</button>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
